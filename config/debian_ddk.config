# Debian and GPU DDK specific config

#LINUX_defconfig[config]+=" mali_gpu.cfg"

# Toolchain
AARCH64_LINUX_GPU=$(find $TOOLS_DIR -type d -name "gcc-arm-*-x86_64-aarch64-linux-gnu")"/bin"
if [ "$FILESYSTEM" == "debian" ]; then
    # LINUX_COMPILER=$AARCH64_LINUX_GPU/aarch64-linux-gnu
    TS_APPS_COMPILER=$AARCH64_LINUX_GPU/aarch64-linux-gnu
    OPTEE_COMPILER=$AARCH64_LINUX_GPU/aarch64-linux-gnu
fi

# Debian Filesystem
DEBIAN_OUTDIR=$OUTPUT_DIR/tmp_build/debian
DEBIAN_PREBUILT_PATH=$DEBIAN_OUTDIR/prebuilt-image
DEBIAN_CUSTOM_PATH=$DEBIAN_OUTDIR/custom-image
DEBIAN_SRC=$SRC_DIR
DEBIAN_TARGET_DIR=debian11-rootfs
DEBIAN_DISTRO=bullseye
DEBIAN_FILES=$FILES_DIR/debian
DEBIAN_README=$DEBIAN_FILES/$PLATFORM/README-debian.md
DEBIAN_WESTON_RUNSCRIPT=$DEBIAN_FILES/$PLATFORM/

# GPU DDK
DEB_DDK_VERSION=r40p0_01eac0
DEB_DDK_REPO=ssh://eu-gerrit-1.euhpc.arm.com:29418/GPU-SW/midgard_sw/driver
DEB_DDK_GNU_PREFIX=$AARCH64_LINUX_GPU/aarch64-linux-gnu-
DEB_DDK_BUILD_DIR=$SRC_DIR/mali/product/build_mali
DEBIAN_OUT_DIR=$OUTPUT_DIR/tmp_build/debian
DEB_DDK_INSTALL_DIR=$DEB_DDK_BUILD_DIR/install
DEB_DDK_DEPLOY_DIR=$DEPLOY_DIR/$PLATFORM/ddk
DEB_DDK_CSF_FW_DIR=$DEB_DDK_DEPLOY_DIR/lib/firmware
DEB_DDK_WAYLAND_DIR=$DEB_DDK_DEPLOY_DIR/lib/aarch64-linux-gnu/mali/wayland
DEB_DDK_MALI_KBASE_MODULE=$SRC_DIR/mali/product/kernel/drivers/gpu/arm/midgard

# VirtIO disk image
DEB_VIRTIO_IMAGE_PATH=$DEBIAN_OUT_DIR/virtIO
DEB_VIRTIO_IMAGE_NAME=debian_disk_image
DEB_VIRTIO_RW_BYTES_SIZE=4K
DEB_VIRTIO_BLOCK_COUNT=16M
DEB_VIRTIO_MOUNT_POINT=debian_rootfs
